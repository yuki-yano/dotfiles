#!/usr/bin/env bash

current_session=$(tmux display-message -p '#S' 2>/dev/null)

output="#[fg=#A5A1F2,bg=#352F63,nobold]"

while IFS= read -r session; do
  if [ -z "$session" ]; then
    continue
  fi

  output+=" "

  if [ "$session" = "$current_session" ]; then
    output+="#[fg=#B4BEFE,bg=#352F63,nobold]#[fg=#1E1E2E,bg=#B4BEFE,bold] ${session} #[fg=#B4BEFE,bg=#352F63,nobold]#[fg=#A5A1F2,bg=#352F63,nobold]"
  else
    output+="#[fg=#C6D0F5,bg=#352F63,nobold] ${session} #[fg=#A5A1F2,bg=#352F63,nobold]"
  fi
done < <(tmux list-sessions -F '#{session_name}')

printf '%s' "$output"

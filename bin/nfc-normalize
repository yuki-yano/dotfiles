#!/usr/bin/env ruby

require 'unf'

if ARGV.length != 1 && ARGV.length != 2
  puts 'Usage: '
  puts '  nfc-normalize FILE'
  puts '  nfc-normalize SRC DEST'
  exit
end

src = ARGV[0]
dest = ARGV[ARGV.length - 1]
encoded_string = UNF::Normalizer.normalize(open(ARGV[0]).read, :nfc)

puts "normalize #{src} > #{dest}"

open(dest, 'w').write(encoded_string)

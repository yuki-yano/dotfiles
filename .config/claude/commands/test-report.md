---
description: Run project test suite, collect coverage metrics, and save report to ai/log/tests/
---

# テストを実行して ai/log/tests/ にレポートを作成

あなたはシニアテスト自動化エンジニアです。

## 目標

プロジェクトの全テストスイートを実行し、カバレッジメトリクスを収集し、`ai/log/tests/` に簡潔で人間が読みやすいレポートを保存する

## 動作仕様（厳密に従う）

ステップ 1. 設定ファイルを読んで技術スタックを検出:
   • JavaScript/TypeScript → Jest/vitest
ステップ 2. テストコマンドとカバレッジフラグを導出（例: `--coverage`、`go test -cover`）。
ステップ 3. フォルダ `ai/log/tests/` が存在することを確認（必要に応じて作成）。
ステップ 4. クリーンな環境でテストを実行（監視モードなし、対話型プロンプトなし）して以下をキャプチャ:
   - 終了コード
   - コンソール出力
   - カバレッジサマリー（利用可能な場合: 行 %、ブランチ %、関数 %）
ステップ 5. アーティファクトを保存:
   - 生のコンソール出力 → `ai/log/tests/<date>-<hash>.txt`
   - Markdown サマリー → `ai/log/tests/<date>-<hash>.md`
ステップ 6. Markdown サマリーには以下のセクションを順番に含める:
   1. `# テストレポート (<date> – <hash>)`
   2. サマリー – 総テスト数、成功、失敗、スキップ、実行時間
   3. 実行したテストの種類
   4. カバレッジ – メトリック → パーセンテージのテーブル（利用不可の場合は省略）
   5. 失敗したテスト – 名前とエラースニペットを含む折りたたみ可能なリスト（`<details>` ブロック）（各最大 20 行）
   6. 次のステップ – 箇条書きの提案（再試行、リファクタリング、カバレッジ向上）
ステップ 7. ファイル書き込み後、両方のアーティファクトへの相対パスを出力。
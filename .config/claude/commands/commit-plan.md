---
description: Analyze git changes and create an organized commit plan with logical grouping
---

# コミット計画作成: $ARGUMENTS

## 目標

Git変更を分析し、論理的にグループ化されたコミット計画を作成する

## ARGUMENTSの活用

- **パス指定**: `"src/"`, `"*.ts"`
- **戦略**: `"細かく分割"`, `"ファイルタイプ別"`
- **モード**: `"--auto"`, `"--dry-run"`

## 実行手順

### ステップ 1: 現状分析

```bash
git status --porcelain
git diff --stat
git log --oneline -20  # コミットパターンを参考
```

### ステップ 2: 変更の分類

1. **ファイルタイプ別**: ソース、設定、ドキュメント、テスト
2. **ディレクトリ別**: 関連ファイルをグループ化
3. **変更種別**: feat/fix/docs/refactor/test/chore

### ステップ 3: コミット計画の出力

```markdown
## 📋 コミット計画

### [1] feat: 新機能の追加
**ファイル**: 
- `path/to/file.ts` (新規)

**メッセージ案**:
```
feat: Add user preference handling

- Implement storage module
- Add unit tests
```

### [2] fix: バグ修正
（必要な数だけ続く）

## 📊 サマリー
- 変更ファイル: X個
- コミット数: Y個
```

### ステップ 4: 実行方法の選択

```
💡 実行方法を選択:
━━━━━━━━━━━━━━━━━━━━━━━━
[a] 自動実行
[i] インタラクティブ（確認しながら）
[e] 計画を編集
[d] ドライラン（確認のみ）
[s] スクリプト保存
[q] キャンセル

選択: 
```

### ステップ 5: 選択に応じた実行

#### [a] 自動実行
全コミットを順番に実行。エラー時は停止し、実行済みコミットを表示

#### [i] インタラクティブ
各コミット前に確認。選択肢: [y]実行 [n]スキップ [e]編集 [q]中断

#### [e] 計画編集
編集コマンド:
- `1,2を統合` - コミットをマージ
- `3を分割` - コミットを分ける
- `1と3を入れ替え` - 順序変更
- `2のメッセージ: 新内容` - メッセージ変更
- `完了` - 編集終了

#### [d] ドライラン
実行予定のコマンドを表示（実際には実行しない）

#### [s] スクリプト保存
実行可能なシェルスクリプトを生成（`commit-plan-YYYY-MM-DD.sh`）

### ステップ 6: 結果報告

実行結果に応じて：
- 成功したコミット数とハッシュ
- エラーの詳細と対処法
- 保存先パス（スクリプトの場合）

## 注意事項

- **コミットサイズ**: 1つの論理的変更に限定
- **メッセージ規約**: プロジェクトの過去のパターンを優先
- **依存関係**: ビルドが壊れない順序で実行
